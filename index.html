<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>متتبع شرائح الموبايل - المحسن</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Tajawal', -apple-system, BlinkMacSystemFont, sans-serif;
            direction: rtl;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            color: #1a202c;
            line-height: 1.6;
            position: relative;
            overflow-x: hidden;
        }

        /* خلفية متحركة */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);
            animation: backgroundMove 20s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes backgroundMove {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-20px) rotate(1deg); }
            66% { transform: translateY(10px) rotate(-1deg); }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            100% { transform: rotate(360deg); }
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        .header h1 {
            font-family: 'Amiri', serif;
            color: #1a202c;
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            animation: titlePulse 3s ease-in-out infinite;
        }

        @keyframes titlePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .header p {
            color: #2d3748;
            font-size: 1.3rem;
            font-weight: 500;
        }

        /* Digital Clock */
        .digital-clock {
            background: rgba(0, 0, 0, 0.8);
            color: #00ff88;
            padding: 15px 30px;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 
                0 0 20px rgba(0, 255, 136, 0.3),
                inset 0 0 20px rgba(0, 255, 136, 0.1);
            border: 2px solid rgba(0, 255, 136, 0.5);
            letter-spacing: 2px;
        }

        /* Motivation Cards */
        .motivation-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .motivation-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
        }

        .motivation-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        }

        .motivation-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            animation: shine 3s ease-in-out infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            50% { transform: translateX(100%) translateY(100%) rotate(45deg); }
            100% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
        }

        .motivation-card .icon {
            font-size: 3rem;
            margin-bottom: 15px;
            display: block;
        }

        .motivation-card h3 {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: #1a202c;
        }

        .motivation-card p {
            color: #2d3748;
            font-size: 1.1rem;
            font-weight: 500;
        }

        /* Simple Stats - محدث */
        .simple-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .simple-stat {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .simple-stat:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .simple-stat .icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
            display: block;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .simple-stat .number {
            font-size: 2rem;
            font-weight: 900;
            color: #1a202c;
            margin-bottom: 8px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .simple-stat .label {
            font-size: 1rem;
            color: #2d3748;
            font-weight: 600;
        }

        /* Progress Cards - محدث */
        .progress-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .progress-card {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        }

        .progress-card h3 {
            color: #1a202c;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .progress-card .value {
            font-size: 2.5rem;
            font-weight: 900;
            color: #667eea;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .progress-card small {
            color: #2d3748;
            font-size: 1rem;
            font-weight: 600;
        }

        /* Circular Progress - محسن */
        .circular-progress {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: conic-gradient(#667eea 0deg, #764ba2 var(--progress-angle), #e2e8f0 var(--progress-angle), #e2e8f0 360deg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            position: relative;
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.2),
                inset 0 0 20px rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .circular-progress::before {
            content: '';
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            border-radius: 50%;
            position: absolute;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .circular-progress .percentage {
            position: relative;
            font-size: 1.6rem;
            font-weight: 900;
            color: #667eea;
            text-shadow: 0 1px 5px rgba(0, 0, 0, 0.1);
        }

        /* Controls - محسن */
        .controls {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .input-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 10px;
            font-weight: 700;
            color: #1a202c;
            font-size: 1.1rem;
        }

        .form-group input,
        .form-group select {
            padding: 15px 18px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            font-size: 16px;
            font-family: 'Tajawal', sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
        }

        /* Buttons - محسن */
        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 700;
            font-family: 'Tajawal', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.9);
            color: #1a202c;
            border: 2px solid rgba(255, 255, 255, 0.5);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-3px);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e53e3e, #c53030);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(229, 62, 62, 0.4);
        }

        /* Quick Actions - محسن */
        .quick-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .quick-btn {
            padding: 12px 18px;
            background: rgba(102, 126, 234, 0.15);
            color: #667eea;
            border: 2px solid #667eea;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Tajawal', sans-serif;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .quick-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        /* Table - محسن */
        .table-container {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            overflow-x: auto;
        }

        .table-container h2 {
            color: #1a202c;
            font-size: 1.6rem;
            margin-bottom: 25px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            border-radius: 15px;
            overflow: hidden;
        }

        th, td {
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            font-weight: 600;
        }

        th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: 700;
            position: sticky;
            top: 0;
            font-size: 1rem;
        }

        tbody tr {
            transition: all 0.3s ease;
        }

        tbody tr:hover {
            background-color: rgba(102, 126, 234, 0.1);
            transform: scale(1.01);
        }

        /* Charts - محسن */
        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 25px;
        }

        .chart-card {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .chart-card:hover {
            transform: translateY(-5px);
        }

        .chart-card h3 {
            color: #1a202c;
            font-size: 1.4rem;
            margin-bottom: 25px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Suggestions Panel */
        .suggestions-panel {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .suggestions-panel h3 {
            color: #1a202c;
            font-size: 1.4rem;
            margin-bottom: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .suggestion-item {
            background: rgba(255, 255, 255, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .suggestion-item:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: translateX(10px);
        }

        .suggestion-item .icon {
            font-size: 1.5rem;
        }

        .suggestion-item .text {
            font-weight: 600;
            color: #1a202c;
        }

        /* Notifications - محسن */
        .notification {
            position: fixed;
            top: 25px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            padding: 18px 30px;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            opacity: 0;
            transition: all 0.4s ease;
            font-weight: 700;
            font-size: 1.1rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }

        .notification.show {
            opacity: 1;
            animation: notificationSlide 0.4s ease;
        }

        @keyframes notificationSlide {
            0% { transform: translateX(-50%) translateY(-20px); opacity: 0; }
            100% { transform: translateX(-50%) translateY(0); opacity: 1; }
        }

        .notification.warning {
            background: linear-gradient(135deg, #ed8936, #dd6b20);
        }

        .notification.error {
            background: linear-gradient(135deg, #e53e3e, #c53030);
        }

        /* Current Time Display */
        .current-time {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background: rgba(0, 0, 0, 0.8);
            color: #00ff88;
            padding: 10px 20px;
            border-radius: 25px;
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            font-weight: bold;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(0, 255, 136, 0.5);
            z-index: 100;
        }

        /* Mobile Responsive - محسن */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .charts-container {
                grid-template-columns: 1fr;
            }
            
            .motivation-cards {
                grid-template-columns: 1fr;
            }
            
            table {
                font-size: 0.85rem;
            }
            
            th, td {
                padding: 10px;
            }
            
            .current-time {
                bottom: 15px;
                right: 15px;
                font-size: 1rem;
                padding: 8px 16px;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Glow Effect */
        .glow {
            box-shadow: 
                0 0 20px rgba(102, 126, 234, 0.5),
                0 0 40px rgba(102, 126, 234, 0.3),
                0 0 60px rgba(102, 126, 234, 0.1);
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <h1>🚀 متتبع شرائح الموبايل المتقدم</h1>
                <p>نظام ذكي وتفاعلي لتتبع الإنجاز وزيادة الإنتاجية</p>
            </div>
        </div>

        <!-- Digital Clock -->
        <div class="digital-clock" id="digitalClock">
            --:--:--
        </div>

        <!-- Motivation Cards -->
        <div class="motivation-cards">
            <div class="motivation-card">
                <span class="icon">🔥</span>
                <h3>استمر في التقدم!</h3>
                <p>كل شريحة تقربك من هدفك</p>
            </div>
            <div class="motivation-card">
                <span class="icon">💪</span>
                <h3>أنت قوي!</h3>
                <p>الإنجاز يبدأ بخطوة واحدة</p>
            </div>
            <div class="motivation-card">
                <span class="icon">🎯</span>
                <h3>ركز على الهدف</h3>
                <p>النجاح ثمرة الثبات والمثابرة</p>
            </div>
            <div class="motivation-card">
                <span class="icon">⭐</span>
                <h3>أنت مميز!</h3>
                <p>كل لحظة عمل تضيف إلى نجاحك</p>
            </div>
        </div>

        <!-- Simple Stats -->
        <div class="simple-stats">
            <div class="simple-stat">
                <div class="icon">📱</div>
                <div class="number" id="todayWork">0</div>
                <div class="label">عمل اليوم</div>
            </div>
            <div class="simple-stat">
                <div class="icon">🎯</div>
                <div class="number" id="dailyGoalProgress">0%</div>
                <div class="label">تقدم الهدف</div>
            </div>
            <div class="simple-stat">
                <div class="icon">⚡</div>
                <div class="number" id="currentSpeed">0</div>
                <div class="label">سرعة حالية</div>
            </div>
            <div class="simple-stat">
                <div class="icon">⏱️</div>
                <div class="number" id="totalHours">0.0</div>
                <div class="label">ساعات العمل</div>
            </div>
            <div class="simple-stat">
                <div class="icon">🏆</div>
                <div class="number" id="tasksCount">0</div>
                <div class="label">عدد المهام</div>
            </div>
            <div class="simple-stat">
                <div class="icon">📊</div>
                <div class="number" id="efficiencyRate">--</div>
                <div class="label">معدل الكفاءة</div>
            </div>
        </div>

        <!-- Progress Cards -->
        <div class="progress-overview">
            <div class="progress-card">
                <div class="circular-progress" id="totalProgress">
                    <div class="percentage" id="totalPercentage">0%</div>
                </div>
                <h3>التقدم الإجمالي</h3>
            </div>
            <div class="progress-card">
                <h3>الشرائح المنجزة</h3>
                <div class="value" id="completedSlides">0</div>
                <small>من أصل <span id="totalSlidesDisplay">200</span></small>
            </div>
            <div class="progress-card">
                <h3>متوسط السرعة</h3>
                <div class="value" id="averageSpeed">0</div>
                <small>شريحة/دقيقة</small>
            </div>
            <div class="progress-card">
                <h3>الوقت المتوقع</h3>
                <div class="value" id="estimatedTime">--</div>
                <small>دقيقة تقريباً</small>
            </div>
        </div>

        <!-- Suggestions Panel -->
        <div class="suggestions-panel">
            <h3>💡 اقتراحات ذكية</h3>
            <div class="suggestion-item" id="suggestion1">
                <span class="icon">⏰</span>
                <span class="text">خذ استراحة قصيرة كل 25 دقيقة</span>
            </div>
            <div class="suggestion-item" id="suggestion2">
                <span class="icon">🎵</span>
                <span class="text">جرب الاستماع للموسيقى التحفيزية</span>
            </div>
            <div class="suggestion-item" id="suggestion3">
                <span class="icon">💧</span>
                <span class="text">لا تنس شرب الماء بانتظام</span>
            </div>
            <div class="suggestion-item" id="suggestion4">
                <span class="icon">📈</span>
                <span class="text">حدد أهدافاً صغيرة قابلة للتحقيق</span>
            </div>
        </div>

        <!-- Controls -->
        <div class="controls">
            <div class="input-group">
                <div class="form-group">
                    <label for="slicesInput">عدد الشرائح:</label>
                    <input type="number" id="slicesInput" min="1" max="50" value="10">
                </div>
                <div class="form-group">
                    <label for="totalSlidesInput">إجمالي الشرائح:</label>
                    <input type="number" id="totalSlidesInput" min="50" value="200">
                </div>
                <div class="form-group">
                    <label for="taskType">نوع المهمة:</label>
                    <select id="taskType">
                        <option value="عادية">عادية 📝</option>
                        <option value="سريعة">سريعة ⚡</option>
                        <option value="معقدة">معقدة 🧠</option>
                        <option value="مراجعة">مراجعة 🔍</option>
                        <option value="إبداعية">إبداعية 🎨</option>
                        <option value="تقنية">تقنية 💻</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="dailyGoalInput">الهدف اليومي:</label>
                    <input type="number" id="dailyGoalInput" min="10" max="500" value="50" placeholder="شريحة">
                </div>
            </div>
            
            <div class="button-group">
                <button class="btn btn-primary" onclick="addTask()">
                    ✅ إضافة دفعة
                </button>
                <button class="btn btn-secondary" onclick="pauseTimer()" id="pauseBtn">
                    ⏸️ إيقاف مؤقت
                </button>
                <button class="btn btn-secondary" onclick="startBreak()">
                    ☕ استراحة
                </button>
                <button class="btn btn-secondary" onclick="exportData()">
                    📊 تصدير
                </button>
                <button class="btn btn-danger" onclick="resetAll()">
                    🔄 إعادة تعيين
                </button>
            </div>

            <div class="quick-actions">
                <div class="quick-btn" onclick="quickAdd(5)">+5 ⚡</div>
                <div class="quick-btn" onclick="quickAdd(10)">+10 📝</div>
                <div class="quick-btn" onclick="quickAdd(15)">+15 🚀</div>
                <div class="quick-btn" onclick="quickAdd(20)">+20 💪</div>
                <div class="quick-btn" onclick="quickAdd(25)">+25 🔥</div>
                <div class="quick-btn" onclick="quickAdd(30)">+30 ⭐</div>
            </div>
        </div>

        <!-- Table -->
        <div class="table-container">
            <h2>📋 سجل المهام المفصل</h2>
            <table id="taskTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>الشرائح</th>
                        <th>الإجمالي</th>
                        <th>الوقت</th>
                        <th>النسبة</th>
                        <th>السرعة</th>
                        <th>النوع</th>
                        <th>وقت البداية</th>
                        <th>التوقيت</th>
                        <th>حذف</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>

        <!-- Charts -->
        <div class="charts-container">
            <div class="chart-card">
                <h3>📈 تطور الإنجاز</h3>
                <canvas id="progressChart" width="400" height="200"></canvas>
            </div>
            <div class="chart-card">
                <h3>⚡ تحليل الأداء</h3>
                <canvas id="speedChart" width="400" height="200"></canvas>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <!-- Current Time Display -->
    <div class="current-time" id="currentTime">--:--:--</div>

    <script>
        // المتغيرات الأساسية
        let totalSlides = 200;
        let completedSlides = 0;
        let batchCounter = 0;
        let sessionStartTime = Date.now();
        let lastBatchTime = Date.now();
        let isPaused = false;
        let pausedDuration = 0;
        let pauseStartTime = 0;
        let tasks = [];
        let dailyGoal = 50;
        let currentTaskStartTime = null;
        let breakStartTime = null;
        let totalBreakTime = 0;
        let actualWorkStartTime = Date.now(); // وقت بداية العمل الفعلي

        // دوال الحفظ والاسترجاع
        function saveToMemory() {
            const data = {
                totalSlides,
                completedSlides,
                batchCounter,
                sessionStartTime,
                lastBatchTime,
                isPaused,
                pausedDuration,
                pauseStartTime,
                tasks,
                dailyGoal,
                currentTaskStartTime,
                breakStartTime,
                totalBreakTime,
                actualWorkStartTime,
                savedAt: Date.now()
            };
            
            // حفظ في متغير عام للجلسة
            window.appData = data;
            
            // محاولة الحفظ في localStorage إذا كان متاحاً
            try {
                localStorage.setItem('mobileSlideTracker', JSON.stringify(data));
            } catch (e) {
                console.log('localStorage غير متاح، سيتم الحفظ في الذاكرة فقط');
            }
        }

        function loadFromMemory() {
            let data = null;
            
            // محاولة الاسترجاع من localStorage أولاً
            try {
                const savedData = localStorage.getItem('mobileSlideTracker');
                if (savedData) {
                    data = JSON.parse(savedData);
                }
            } catch (e) {
                console.log('لا يمكن الاسترجاع من localStorage');
            }
            
            // الاسترجاع من متغير الجلسة كبديل
            if (!data && window.appData) {
                data = window.appData;
            }
            
            if (data && data.savedAt) {
                // استرجاع البيانات
                totalSlides = data.totalSlides || 200;
                completedSlides = data.completedSlides || 0;
                batchCounter = data.batchCounter || 0;
                sessionStartTime = data.sessionStartTime || Date.now();
                lastBatchTime = data.lastBatchTime || Date.now();
                isPaused = data.isPaused || false;
                pausedDuration = data.pausedDuration || 0;
                pauseStartTime = data.pauseStartTime || 0;
                tasks = data.tasks || [];
                dailyGoal = data.dailyGoal || 50;
                currentTaskStartTime = data.currentTaskStartTime;
                breakStartTime = data.breakStartTime;
                totalBreakTime = data.totalBreakTime || 0;
                actualWorkStartTime = data.actualWorkStartTime || Date.now();
                
                // تحديث حقول الإدخال
                document.getElementById('totalSlidesInput').value = totalSlides;
                document.getElementById('dailyGoalInput').value = dailyGoal;
                
                // إعادة بناء الجدول
                rebuildTable();
                
                // تحديث زر الإيقاف
                if (isPaused) {
                    document.getElementById('pauseBtn').innerHTML = '▶️ استئناف';
                }
                
                showNotification('📂 تم استرجاع البيانات المحفوظة بنجاح!');
                return true;
            }
            return false;
        }

        // الرسوم البيانية
        let progressChart, speedChart;

        // رسائل التحفيز العشوائية
        const motivationalMessages = [
            '🔥 رائع! استمر في هذا الأداء المميز!',
            '💪 أنت تحرز تقدماً مذهلاً!',
            '⭐ كل شريحة تقربك من النجاح!',
            '🚀 إنجازك اليوم يلهم الآخرين!',
            '🎯 تركيزك اليوم في أعلى مستوياته!',
            '🏆 أنت بطل حقيقي في الإنتاجية!',
            '💎 جودة عملك تتحسن باستمرار!',
            '🌟 أداؤك اليوم استثنائي!'
        ];

        // اقتراحات ديناميكية
        const dynamicSuggestions = [
            { icon: '⏰', text: 'خذ استراحة قصيرة كل 25 دقيقة' },
            { icon: '🎵', text: 'جرب الاستماع للموسيقى التحفيزية' },
            { icon: '💧', text: 'لا تنس شرب الماء بانتظام' },
            { icon: '📈', text: 'حدد أهدافاً صغيرة قابلة للتحقيق' },
            { icon: '🧘', text: 'خذ نفساً عميقاً وركز' },
            { icon: '🌱', text: 'كل إنجاز صغير يقود لنجاح كبير' },
            { icon: '💡', text: 'غير بيئة العمل لتجديد النشاط' },
            { icon: '🎉', text: 'كافئ نفسك عند تحقيق هدف' }
        ];

        // تحديث الساعة الرقمية
        function updateDigitalClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ar-EG', {
                hour12: false,
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('digitalClock').textContent = timeString;
            document.getElementById('currentTime').textContent = timeString;
        }

        // تحديث الاقتراحات الذكية
        function updateSuggestions() {
            const suggestions = document.querySelectorAll('.suggestion-item');
            const shuffledSuggestions = [...dynamicSuggestions].sort(() => 0.5 - Math.random());
            
            suggestions.forEach((suggestion, index) => {
                if (shuffledSuggestions[index]) {
                    const iconSpan = suggestion.querySelector('.icon');
                    const textSpan = suggestion.querySelector('.text');
                    iconSpan.textContent = shuffledSuggestions[index].icon;
                    textSpan.textContent = shuffledSuggestions[index].text;
                }
            });
        }

        // إعداد الرسوم البيانية
        function initCharts() {
            // رسم التقدم
            const progressCtx = document.getElementById('progressChart').getContext('2d');
            progressChart = new Chart(progressCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'النسبة المئوية',
                        data: [],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        fill: true,
                        tension: 0.4,
                        borderWidth: 3,
                        pointBackgroundColor: '#764ba2',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    plugins: { 
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#fff',
                            bodyColor: '#fff',
                            borderColor: '#667eea',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: { 
                                callback: function(value) { return value + '%'; },
                                color: '#666'
                            },
                            grid: { color: 'rgba(0, 0, 0, 0.1)' }
                        },
                        x: {
                            ticks: { color: '#666' },
                            grid: { color: 'rgba(0, 0, 0, 0.1)' }
                        }
                    }
                }
            });

            // رسم السرعة
            const speedCtx = document.getElementById('speedChart').getContext('2d');
            speedChart = new Chart(speedCtx, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'شريحة/دقيقة',
                        data: [],
                        backgroundColor: 'rgba(102, 126, 234, 0.8)',
                        borderColor: '#667eea',
                        borderWidth: 2,
                        borderRadius: 8,
                        borderSkipped: false,
                    }]
                },
                options: {
                    responsive: true,
                    plugins: { 
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#fff',
                            bodyColor: '#fff',
                            borderColor: '#667eea',
                            borderWidth: 1
                        }
                    },
                    scales: { 
                        y: { 
                            beginAtZero: true,
                            ticks: { color: '#666' },
                            grid: { color: 'rgba(0, 0, 0, 0.1)' }
                        },
                        x: {
                            ticks: { color: '#666' },
                            grid: { color: 'rgba(0, 0, 0, 0.1)' }
                        }
                    }
                }
            });
        }

        // تحديث المؤشرات البسيطة
        function updateIndicators() {
            const percentage = (completedSlides / totalSlides) * 100;
            
            // التقدم الدائري
            const progressElement = document.getElementById('totalProgress');
            const progressAngle = (percentage / 100) * 360;
            progressElement.style.setProperty('--progress-angle', progressAngle + 'deg');
            document.getElementById('totalPercentage').textContent = percentage.toFixed(1) + '%';

            // إضافة تأثير التوهج عند الاكتمال
            if (percentage >= 100) {
                progressElement.classList.add('glow');
            } else {
                progressElement.classList.remove('glow');
            }

            // الشرائح المنجزة
            document.getElementById('completedSlides').textContent = completedSlides;
            document.getElementById('totalSlidesDisplay').textContent = totalSlides;

            // حساب متوسط السرعة المحسن
            const currentTime = Date.now();
            let effectiveWorkTime = currentTime - actualWorkStartTime - totalBreakTime;
            
            if (isPaused && pauseStartTime) {
                effectiveWorkTime -= (currentTime - pauseStartTime);
            } else {
                effectiveWorkTime -= pausedDuration;
            }
            
            if (breakStartTime) {
                effectiveWorkTime -= (currentTime - breakStartTime);
            }
            
            const totalTimeMinutes = Math.max(0, effectiveWorkTime / (1000 * 60));
            const averageSpeed = totalTimeMinutes > 0 ? (completedSlides / totalTimeMinutes).toFixed(1) : 0;
            document.getElementById('averageSpeed').textContent = averageSpeed;

            // الوقت المتوقع
            const remainingSlides = totalSlides - completedSlides;
            const estimatedMinutes = averageSpeed > 0 ? (remainingSlides / averageSpeed).toFixed(0) : '--';
            document.getElementById('estimatedTime').textContent = estimatedMinutes;

            // الإحصائيات البسيطة
            updateSimpleStats();
            
            // حفظ تلقائي
            saveToMemory();
        }

        // تحديث الإحصائيات البسيطة
        function updateSimpleStats() {
            // عمل اليوم
            document.getElementById('todayWork').textContent = completedSlides;
            
            // تقدم الهدف اليومي
            const goalProgress = dailyGoal > 0 ? Math.min(100, (completedSlides / dailyGoal) * 100).toFixed(0) : 0;
            document.getElementById('dailyGoalProgress').textContent = goalProgress + '%';
            
            // السرعة الحالية
            const currentSpeed = tasks.length > 0 ? tasks[tasks.length - 1].speed : 0;
            document.getElementById('currentSpeed').textContent = currentSpeed;
            
            // ساعات العمل - تحسين الحساب
            const currentTime = Date.now();
            let effectiveWorkTime = currentTime - actualWorkStartTime - totalBreakTime;
            
            // طرح الوقت المتوقف إذا كان النظام متوقفاً حالياً
            if (isPaused && pauseStartTime) {
                effectiveWorkTime -= (currentTime - pauseStartTime);
            } else {
                effectiveWorkTime -= pausedDuration;
            }
            
            // طرح وقت الاستراحة الحالي إذا كان في استراحة
            if (breakStartTime) {
                effectiveWorkTime -= (currentTime - breakStartTime);
            }
            
            const workHours = Math.max(0, effectiveWorkTime / (1000 * 60 * 60));
            document.getElementById('totalHours').textContent = workHours.toFixed(1);

            // عدد المهام
            document.getElementById('tasksCount').textContent = tasks.length;

            // معدل الكفاءة - تحسين الحساب
            let efficiencyRate = '--';
            if (tasks.length > 0 && workHours > 0) {
                const hourlyRate = (completedSlides / workHours).toFixed(1);
                efficiencyRate = hourlyRate + ' ش/س';
            }
            document.getElementById('efficiencyRate').textContent = efficiencyRate;
        }

        // إضافة مهمة
        function addTask() {
            const slidesInput = parseInt(document.getElementById('slicesInput').value) || 10;
            const taskType = document.getElementById('taskType').value;

            if (completedSlides + slidesInput > totalSlides) {
                showNotification('تحذير: العدد يتجاوز الحد المسموح!', 'warning');
                return;
            }

            const currentTime = Date.now();
            let timeSinceLastBatch;

            if (currentTaskStartTime) {
                timeSinceLastBatch = (currentTime - currentTaskStartTime - (isPaused ? Date.now() - pauseStartTime : 0)) / (1000 * 60);
            } else {
                timeSinceLastBatch = (currentTime - lastBatchTime - (isPaused ? Date.now() - pauseStartTime : 0)) / (1000 * 60);
            }
            
            batchCounter++;
            completedSlides += slidesInput;
            const percentage = (completedSlides / totalSlides) * 100;
            const speed = timeSinceLastBatch > 0 ? (slidesInput / timeSinceLastBatch).toFixed(1) : 0;

            // وقت بداية المهمة
            const startTime = currentTaskStartTime ? 
                new Date(currentTaskStartTime).toLocaleTimeString('ar-EG') : 
                new Date(lastBatchTime).toLocaleTimeString('ar-EG');

            const task = {
                id: batchCounter,
                batch: batchCounter,
                slidesAdded: slidesInput,
                totalSlides: completedSlides,
                timeSpent: timeSinceLastBatch.toFixed(1),
                percentage: percentage.toFixed(1),
                speed: speed,
                taskType: taskType,
                startTime: startTime,
                timestamp: new Date().toLocaleTimeString('ar-EG')
            };

            tasks.push(task);
            addRowToTable(task);
            updateCharts();
            updateIndicators();
            
            lastBatchTime = currentTime;
            currentTaskStartTime = currentTime; // بداية المهمة التالية
            
            // رسالة تحفيزية عشوائية
            const randomMessage = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)];
            showNotification(`تم إضافة ${slidesInput} شريحة! ${randomMessage}`);

            // فحص اكتمال العمل
            if (completedSlides >= totalSlides) {
                showNotification('🎊 تهانينا الحارة! تم إنجاز جميع الشرائح بنجاح!');
                celebrateCompletion();
            }

            // فحص تحقيق الهدف اليومي
            if (completedSlides >= dailyGoal && dailyGoal > 0 && completedSlides - slidesInput < dailyGoal) {
                showNotification('🏆 مبروك! تم تحقيق الهدف اليومي بتفوق!');
            }
        }

        // إضافة صف للجدول
        function addRowToTable(task) {
            const table = document.getElementById("taskTable").getElementsByTagName('tbody')[0];
            const row = table.insertRow(0);
            
            row.innerHTML = `
                <td><strong style="color: #667eea;">${task.batch}</strong></td>
                <td><span style="color: #48bb78; font-weight: 700; font-size: 1.1rem;">${task.slidesAdded}</span></td>
                <td>${task.totalSlides}</td>
                <td>${task.timeSpent} د</td>
                <td><strong style="color: #667eea;">${task.percentage}%</strong></td>
                <td><span style="color: #e53e3e; font-weight: 600;">${task.speed}</span> ش/د</td>
                <td><span style="font-size: 0.9rem; padding: 4px 8px; background: rgba(102, 126, 234, 0.1); border-radius: 10px;">${task.taskType}</span></td>
                <td style="font-size: 0.85rem; color: #2d3748;">${task.startTime}</td>
                <td style="font-size: 0.85rem; color: #2d3748;">${task.timestamp}</td>
                <td><button class="btn btn-danger" style="padding: 8px 12px; font-size: 12px;" onclick="deleteTask(${task.id})">🗑️</button></td>
            `;

            // تأثير الظهور للصف الجديد
            row.style.opacity = '0';
            row.style.transform = 'translateY(-20px)';
            setTimeout(() => {
                row.style.transition = 'all 0.5s ease';
                row.style.opacity = '1';
                row.style.transform = 'translateY(0)';
            }, 100);
        }

        // تحديث الرسوم البيانية
        function updateCharts() {
            const recent = tasks.slice(-10);
            const labels = recent.map((t, i) => `مهمة ${i + 1}`);
            const progressData = recent.map(t => parseFloat(t.percentage));
            const speedData = recent.map(t => parseFloat(t.speed));

            progressChart.data.labels = labels;
            progressChart.data.datasets[0].data = progressData;
            progressChart.update('active');

            speedChart.data.labels = labels;
            speedChart.data.datasets[0].data = speedData;
            speedChart.update('active');
        }

        // الإضافة السريعة
        function quickAdd(count) {
            document.getElementById('slicesInput').value = count;
            addTask();
        }

        // بدء استراحة
        function startBreak() {
            if (!breakStartTime) {
                breakStartTime = Date.now();
                showNotification('☕ بدأت الاستراحة! استمتع بوقتك', 'warning');
                
                // تذكير العودة بعد 5 دقائق
                setTimeout(() => {
                    if (breakStartTime) {
                        showNotification('⏰ حان وقت العودة للعمل!', 'warning');
                    }
                }, 5 * 60 * 1000);
            } else {
                totalBreakTime += Date.now() - breakStartTime;
                breakStartTime = null;
                showNotification('🚀 أهلاً بعودتك! لنستكمل الإنجاز');
            }
        }

        // إيقاف/استئناف المؤقت
        function pauseTimer() {
            if (!isPaused) {
                isPaused = true;
                pauseStartTime = Date.now();
                document.getElementById('pauseBtn').innerHTML = '▶️ استئناف';
                showNotification('تم إيقاف المؤقت مؤقتاً ⏸️');
            } else {
                pausedDuration += Date.now() - pauseStartTime;
                isPaused = false;
                document.getElementById('pauseBtn').innerHTML = '⏸️ إيقاف مؤقت';
                showNotification('تم استئناف العمل بنجاح ▶️');
            }
        }

        // حذف مهمة
        function deleteTask(taskId) {
            if (confirm('هل تريد حذف هذه المهمة نهائياً؟')) {
                const taskIndex = tasks.findIndex(t => t.id === taskId);
                if (taskIndex > -1) {
                    const task = tasks[taskIndex];
                    completedSlides -= task.slidesAdded;
                    tasks.splice(taskIndex, 1);
                    
                    rebuildTable();
                    updateCharts();
                    updateIndicators();
                    showNotification('تم حذف المهمة بنجاح 🗑️');
                }
            }
        }

        // إعادة بناء الجدول
        function rebuildTable() {
            const tbody = document.getElementById("taskTable").getElementsByTagName('tbody')[0];
            tbody.innerHTML = '';
            tasks.slice().reverse().forEach(task => addRowToTable(task));
        }

        // تصدير البيانات
        function exportData() {
            const currentTime = Date.now();
            let effectiveWorkTime = currentTime - actualWorkStartTime - totalBreakTime;
            
            if (isPaused && pauseStartTime) {
                effectiveWorkTime -= (currentTime - pauseStartTime);
            } else {
                effectiveWorkTime -= pausedDuration;
            }
            
            if (breakStartTime) {
                effectiveWorkTime -= (currentTime - breakStartTime);
            }
            
            const workHours = Math.max(0, effectiveWorkTime / (1000 * 60 * 60));
            const averageSpeed = workHours > 0 ? (completedSlides / workHours).toFixed(1) : 0;

            const data = {
                تاريخ_التصدير: new Date().toLocaleString('ar-EG'),
                معلومات_الجلسة: {
                    بداية_الجلسة: new Date(sessionStartTime).toLocaleString('ar-EG'),
                    بداية_العمل_الفعلي: new Date(actualWorkStartTime).toLocaleString('ar-EG'),
                    نهاية_الجلسة: new Date().toLocaleString('ar-EG'),
                    مدة_الجلسة_الكلية: ((currentTime - sessionStartTime) / (1000 * 60 * 60)).toFixed(1) + ' ساعة',
                    مدة_العمل_الفعلي: workHours.toFixed(1) + ' ساعة',
                    مدة_الاستراحات: (totalBreakTime / (1000 * 60 * 60)).toFixed(1) + ' ساعة',
                    مدة_التوقف: (pausedDuration / (1000 * 60 * 60)).toFixed(1) + ' ساعة'
                },
                الملخص: {
                    إجمالي_الشرائح: totalSlides,
                    الشرائح_المنجزة: completedSlides,
                    النسبة_المئوية: ((completedSlides / totalSlides) * 100).toFixed(1) + '%',
                    الهدف_اليومي: dailyGoal,
                    تحقيق_الهدف: completedSlides >= dailyGoal ? 'تم تحقيقه ✅' : 'لم يتحقق ❌',
                    عدد_المهام: tasks.length,
                    متوسط_السرعة_بالساعة: averageSpeed + ' ش/س',
                    متوسط_السرعة_بالدقيقة: (parseFloat(averageSpeed) / 60).toFixed(2) + ' ش/د'
                },
                الإحصائيات_التفصيلية: {
                    أسرع_مهمة: tasks.length > 0 ? Math.max(...tasks.map(t => parseFloat(t.speed))) + ' ش/د' : 0,
                    أبطأ_مهمة: tasks.length > 0 ? Math.min(...tasks.map(t => parseFloat(t.speed))) + ' ش/د' : 0,
                    متوسط_الشرائح_بالمهمة: tasks.length > 0 ? (completedSlides / tasks.length).toFixed(1) : 0,
                    كفاءة_الوقت: workHours > 0 ? ((completedSlides / workHours / 60) * 100).toFixed(1) + '%' : '0%'
                },
                المهام_التفصيلية: tasks
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `تقرير-شرائح-مفصل-${new Date().toLocaleDateString('ar-EG').replace(/\//g, '-')}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('📊 تم تصدير التقرير المفصل مع إحصائيات الوقت الدقيقة!');
        }

        // إعادة تعيين الكل
        function resetAll() {
            if (confirm('⚠️ سيتم حذف جميع البيانات نهائياً. هل أنت متأكد؟')) {
                // حذف البيانات المحفوظة
                try {
                    localStorage.removeItem('mobileSlideTracker');
                } catch (e) {
                    console.log('لا يمكن حذف localStorage');
                }
                
                if (window.appData) {
                    delete window.appData;
                }

                totalSlides = parseInt(document.getElementById('totalSlidesInput').value) || 200;
                completedSlides = 0;
                batchCounter = 0;
                sessionStartTime = Date.now();
                actualWorkStartTime = Date.now();
                lastBatchTime = Date.now();
                currentTaskStartTime = null;
                isPaused = false;
                pausedDuration = 0;
                totalBreakTime = 0;
                breakStartTime = null;
                tasks = [];

                // إعادة تعيين زر الإيقاف
                document.getElementById('pauseBtn').innerHTML = '⏸️ إيقاف مؤقت';

                // مسح الجدول
                document.getElementById("taskTable").getElementsByTagName('tbody')[0].innerHTML = '';

                // مسح الرسوم البيانية
                progressChart.data.labels = [];
                progressChart.data.datasets[0].data = [];
                progressChart.update();
                
                speedChart.data.labels = [];
                speedChart.data.datasets[0].data = [];
                speedChart.update();

                updateIndicators();
                updateSuggestions();
                showNotification('🔄 تم إعادة تعيين النظام بالكامل وحذف البيانات المحفوظة!');
            }
        }

        // احتفال الإنجاز
        function celebrateCompletion() {
            // تأثيرات بصرية للاحتفال
            document.body.style.animation = 'backgroundMove 1s ease-in-out';
            
            setTimeout(() => {
                document.body.style.animation = 'backgroundMove 20s ease-in-out infinite';
            }, 1000);
        }

        // عرض الإشعارات
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification show ${type}`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        // تحديث الهدف اليومي
        document.getElementById('dailyGoalInput').addEventListener('change', function() {
            dailyGoal = parseInt(this.value) || 50;
            updateIndicators();
            showNotification(`🎯 تم تحديث الهدف اليومي إلى ${dailyGoal} شريحة بنجاح!`);
        });

        // تحديث إجمالي الشرائح
        document.getElementById('totalSlidesInput').addEventListener('change', function() {
            const newTotal = parseInt(this.value) || 200;
            if (newTotal >= completedSlides) {
                totalSlides = newTotal;
                updateIndicators();
                showNotification(`📊 تم تحديث إجمالي الشرائح إلى ${totalSlides}`);
            } else {
                this.value = totalSlides;
                showNotification('⚠️ لا يمكن أن يكون الإجمالي أقل من الشرائح المنجزة', 'warning');
            }
        });

        // اختصارات لوحة المفاتيح
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'Enter') {
                addTask();
                e.preventDefault();
            }
            if (e.key === 'Escape') {
                pauseTimer();
            }
            if (e.ctrlKey && e.key === 's') {
                exportData();
                e.preventDefault();
            }
            if (e.ctrlKey && e.key === 'r') {
                resetAll();
                e.preventDefault();
            }
        });

        // التهيئة
        document.addEventListener('DOMContentLoaded', function() {
            // محاولة استرجاع البيانات المحفوظة
            const dataLoaded = loadFromMemory();
            
            initCharts();
            updateIndicators();
            
            // تعيين وقت بداية المهمة إذا لم يتم استرجاعها
            if (!dataLoaded) {
                currentTaskStartTime = Date.now();
                actualWorkStartTime = Date.now();
            }
            
            // تحديث الساعة كل ثانية
            setInterval(updateDigitalClock, 1000);
            updateDigitalClock();
            
            // تحديث الاقتراحات كل 30 ثانية
            setInterval(updateSuggestions, 30000);
            updateSuggestions();
            
            // حفظ تلقائي كل دقيقة
            setInterval(saveToMemory, 60000);
            
            // رسائل الترحيب
            if (dataLoaded) {
                setTimeout(() => {
                    showNotification('🔄 تم استرجاع جلستك السابقة بنجاح!');
                }, 1000);
            } else {
                setTimeout(() => {
                    showNotification('🌟 مرحباً بك في النسخة المطورة! ابدأ رحلة الإنجاز');
                }, 1000);
                
                setTimeout(() => {
                    showNotification('💡 اختصارات مفيدة: Ctrl+Enter للإضافة، Escape للإيقاف');
                }, 4000);
                
                setTimeout(() => {
                    showNotification('🎯 حدد هدفك اليومي واتبع تقدمك المباشر');
                }, 7000);
            }
        });

        // دوال مساعدة للأداء
        function calculateEfficiency() {
            if (tasks.length === 0) return 0;
            const totalTime = (Date.now() - sessionStartTime - pausedDuration - totalBreakTime) / (1000 * 60);
            return totalTime > 0 ? (completedSlides / totalTime * 60).toFixed(1) : 0; // شرائح/ساعة
        }

        function getProductivityStatus() {
            const efficiency = calculateEfficiency();
            if (efficiency > 100) return { status: 'ممتاز', color: '#48bb78', icon: '🔥' };
            if (efficiency > 50) return { status: 'جيد جداً', color: '#667eea', icon: '💪' };
            if (efficiency > 25) return { status: 'جيد', color: '#ed8936', icon: '👍' };
            return { status: 'يحتاج تحسين', color: '#e53e3e', icon: '📈' };
        }

        // تحديث دوري للمؤشرات
        setInterval(() => {
            if (!isPaused) {
                updateIndicators();
            }
        }, 30000); // كل 30 ثانية
    </script>
</body>
</html>
